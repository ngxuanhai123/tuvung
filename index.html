<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Học Từ Vựng Tiếng Anh</title>
<style>
  :root {
    --bg: #e0e5ec;
    --card: #e0e5ec;
    --sd: #a3b1c6;
    --sl: #ffffff;
    --accent: #6c5ce7;
    --text: #2d3436;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'Segoe UI', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: grid;
    place-items: center;
  }

  .home {
    text-align: center;
    animation: fadeIn 1s;
  }
  h1 {
    font-size: 4rem;
    font-weight: 900;
    background: linear-gradient(135deg, #6c5ce7, #a29bfe);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 20px;
  }
  .subtitle {
    font-size: 1.5rem;
    color: #636e72;
    margin-bottom: 50px;
  }

  .btn-big {
    padding: 22px 60px;
    font-size: 1.6rem;
    font-weight: 700;
    border: none;
    border-radius: 60px;
    background: var(--card);
    box-shadow: 15px 15px 30px var(--sd), -15px -15px 30px var(--sl);
    cursor: pointer;
    transition: all 0.4s;
  }
  .btn-big:hover {
    transform: translateY(-10px);
    box-shadow: 25px 25px 50px var(--sd), -25px -25px 50px var(--sl);
  }
  .btn-big:active {
    box-shadow: inset 10px 10px 20px var(--sd), inset -10px -10px 20px var(--sl);
  }

  /* Panel chọn chủ đề */
  #topicPanel {
    position: fixed;
    inset: 0;
    background: rgba(224,229,236,0.98);
    backdrop-filter: blur(20px);
    display: none;
    align-items: flex-start;
    justify-content: center;
    padding: 40px 20px;
    overflow-y: auto;
    z-index: 1000;
  }
  .panel-box {
    width: 100%;
    max-width: 1200px;
    background: var(--card);
    border-radius: 35px;
    padding: 50px;
    box-shadow: 30px 30px 80px var(--sd), -30px -30px 80px var(--sl);
  }
  .panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 40px;
  }
  .close-panel {
    width: 60px; height: 60px;
    border-radius: 50%;
    background: var(--card);
    box-shadow: 8px 8px 16px var(--sd), -8px -8px 16px var(--sl);
    font-size: 2rem;
    cursor: pointer;
  }

  .topics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 30px;
  }
  .topic-card {
    background: var(--card);
    border-radius: 28px;
    padding: 40px 25px;
    text-align: center;
    cursor: pointer;
    box-shadow: 15px 15px 30px var(--sd), -15px -15px 30px var(--sl);
    transition: all 0.4s;
  }
  .topic-card:hover {
    transform: translateY(-20px);
    box-shadow: 25px 25px 50px var(--sd), -25px -25px 50px var(--sl);
  }
  .topic-name { font-size: 1.9rem; font-weight: 700; margin-bottom: 12px; }
  .word-count { font-size: 1.4rem; color: #74b9ff; }

  .game-bar {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    background: var(--card);
    padding: 20px;
    display: flex;
    justify-content: center;
    gap: 20px;
    box-shadow: 0 -12px 24px var(--sd);
  }
  .btn-game {
    padding: 16px 34px;
    font-size: 1.1rem;
    font-weight: 600;
    border: none;
    border-radius: 50px;
    background: var(--card);
    box-shadow: 8px 8px 16px var(--sd), -8px -8px 16px var(--sl);
    cursor: pointer;
  }
  .btn-game:active {
    box-shadow: inset 6px 6px 12px var(--sd), inset -6px -6px 12px var(--sl);
  }

  @keyframes fadeIn { from {opacity:0; transform:scale(0.9);} to {opacity:1; transform:scale(1);} }
</style>
</head>
<body>

<!-- Trang chủ -->
<div class="home">
  <h1>Học Từ Vựng</h1>
  <p class="subtitle">Tiếng Anh nhớ lâu – chơi mà học</p>
  <button class="btn-big" onclick="document.getElementById('topicPanel').style.display='flex'">
    Chọn chủ đề
  </button>
</div>

<!-- Panel chọn chủ đề (ẩn lúc đầu) -->
<div id="topicPanel">
  <div class="panel-box">
    <div class="panel-header">
      <h2 style="font-size:2.5rem;">Chọn chủ đề để học</h2>
      <div class="close-panel" onclick="document.getElementById('topicPanel').style.display='none'">×</div>
    </div>
    <div id="topicsGrid" class="topics-grid"></div>
  </div>
</div>

<!-- Thanh chơi game cố định dưới -->
<div class="game-bar">
  <button class="btn-game" onclick="start('flashcard')">Flashcard</button>
  <button class="btn-game" onclick="start('fill')">Điền từ</button>
  <button class="btn-game" onclick="start('matching')">Ghép đôi</button>
  <button class="btn-game" onclick="start('quiz')">Trắc nghiệm</button>
</div>

<script>
let currentWords = [];
let currentName = "";

// Tự động tải từ GitHub (thay repo của bạn vào đây)
const REPO = "yourusername/your-repo"; // ← SỬA DÒNG NÀY

async function loadTopics() {
  let topics = {};

  // 1. Thử lấy từ GitHub
  if (REPO !== "yourusername/your-repo") {
    try {
      const res = await fetch(`https://api.github.com/repos/${REPO}/contents/`);
      const files = await res.json();
      for (let f of files) {
        if (f.name.endsWith('.json')) {
          const raw = await fetch(f.download_url);
          const data = await raw.json();
          const name = f.name.replace('.json','').replace(/[_-]/g,' ').trim();
          topics[f.name] = {
            name: name.charAt(0).toUpperCase() + name.slice(1),
            words: Array.isArray(data) ? data : (data.words || [])
          };
        }
      }
    } catch(e) {}
  }

  // 2. Nếu không có → dùng mẫu đẹp
  if (Object.keys(topics).length === 0) {
    topics = {
      "cơ_bản.json": {name:"Cơ bản A1-A2", words:[
        {english:"hello",vietnamese:"xin chào",example:"Hello!"},
        {english:"family",vietnamese:"gia đình"}
      ]},
      "food.json": {name:"Ẩm thực", words:[
        {english:"delicious",vietnamese:"ngon"},
        {english:"coffee",vietnamese:"cà phê"}
      ]},
      "travel.json": {name:"Du lịch", words:[
        {english:"passport",vietnamese:"hộ chiếu"},
        {english:"beach",vietnamese:"bãi biển"}
      ]}
    };
  }

  // Hiển thị
  const grid = document.getElementById('topicsGrid');
  grid.innerHTML = Object.values(topics).map(t => `
    <div class="topic-card" onclick="selectTopic('${t.name}', ${JSON.stringify(t.words)})">
      <div class="topic-name">${t.name}</div>
      <div class="word-count">${t.words.length} từ</div>
    </div>
  `).join('');
}

function selectTopic(name, words) {
  currentWords = words;
  currentName = name;
  document.getElementById('topicPanel').style.display = 'none';
  alert(`Đã chọn: ${name} (${words.length} từ)`);
}

// Ví dụ Flashcard nhanh (bạn có thể thêm 3 trò còn lại)
function start(type) {
  if (!currentWords.length) return alert("Vui lòng chọn chủ đề trước!");
  if (type === 'flashcard') {
    let i = 0;
    const show = () => {
      const w = currentWords[i];
      const html = `
        <h2 style="text-align:center;color:var(--accent);margin-bottom:30px;">${currentName}</h2>
        <div style="width:460px;height:300px;margin:40px auto;background:var(--card);border-radius:30px;
             box-shadow:20px 20px 40px var(--sd),-20px -20px 40px var(--sl);
             display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:3rem;font-weight:700;cursor:pointer;"
             onclick="this.innerHTML=this.innerHTML.includes('vietnamese')?'${w.english}':'${w.vietnamese}<br><small style=font-size:1rem;margin-top:20px>${w.example||''}</small>'">
          ${w.english}
        </div>
        <div style="text-align:center;">
          <button class="btn-game" onclick="i--;if(i<0)i=currentWords.length-1;show()">Trước</button>
          <span style="margin:0 40px;font-size:2rem;">${i+1}/${currentWords.length}</span>
          <button class="btn-game" onclick="i=(i+1)%currentWords.length;show()">Sau</button>
        </div>`;
      document.body.insertAdjacentHTML('beforeend', `<div style="position:fixed;inset:0;background:rgba(0,0,0,0.8);display:grid;place-items:center;z-index:9999;">${html}<div style="position:absolute;top:30px;right:40px;font-size:3rem;color:white;cursor:pointer" onclick="this.parentElement.remove()">×</div></div>`);
    };
    show();
  }
}

// Khởi động
loadTopics();
</script>
</body>
</html>
